---
import Layout from '../layouts/Layout.astro';
import SectionTitle from '../layouts/SectionTitle.astro';

import { execSync } from 'node:child_process';

let lastUpdated = new Date().toISOString().slice(0, 10);
try {
  lastUpdated = execSync('git log -1 --format=%cs', { encoding: 'utf8' }).trim();
} catch {
  // Fallback is build date; keep the page working even if git isn't available.
}

const profile = {
  name: 'Harrison Chojnowski',
  email: 'chojnowski.h@ufl.edu',
  phone: '(702) 355-5729',
  location: 'Gainesville, FL',
  github: 'https://github.com/hachoj'
};

const employment = [
  {
    role: 'Researcher',
    org: 'MIRTH AI Lab',
    period: '2024 - Present',
    location: 'Gainesville, FL',
    highlights: [
      'Trained diffusion and flow-matching generative models for high-fidelity medical image synthesis.',
      'Developed implicit neural representations (INRs) for resolution-independent volumetric analysis.',
      'Implemented GRPO pipelines to align model reasoning with expert clinical reports.'
    ]
  },
  {
    role: 'Paid OPS Researcher',
    org: 'University of Florida',
    period: '2025 - Present',
    location: 'Gainesville, FL',
    highlights: [
      'Built feature extraction pipelines across medical imaging modalities including ultrasound.',
      'Trained semantic embeddings from clinical reports using LLMs for image-text alignment.'
    ]
  }
];

const education = [
  {
    degree: 'B.S. Computer Science, B.S. Mathematics',
    school: 'University of Florida',
    period: 'Aug 2024 - May 2027',
    gpa: '3.95 / 4.00',
    details: [
      'Deep Learning in Medical Image Analysis',
      'Linear Algebra for Data Science',
      'Real Analysis with Advanced Calculus I and II'
    ]
  }
];

const projects = [
  {
    name: 'PixArt/SD3 from Scratch (Full Pipeline)',
    stack: 'PyTorch, vLLM',
    detail: 'Implemented full 5-stage training pipeline and full model stack end-to-end.',
    href: 'https://github.com/hachoj/Pixart-Alpha-From-Scratch'
  },
  {
    name: 'Geometry-Aware-MicroUS-INR',
    stack: 'Python',
    href: 'https://github.com/mirthAI/GeometryAware-MicroUS-INR'
  },
  {
    name: 'GRPO-From-Scratch',
    stack: 'Python',
    href: 'https://github.com/hachoj/GRPO-From-Scratch'
  },
  {
    name: 'PixArt Stage-1 POC (JAX Stack)',
    stack: 'Flax, Optax, Equinox, Grain',
    detail: 'Proof-of-concept implementation for stage 1 to demonstrate JAX ecosystem proficiency.',
    href: 'https://github.com/hachoj/PixelArt-Alpha-Equinox-Grain'
  },
  {
    name: 'Triton',
    stack: 'Python',
    href: 'https://github.com/hachoj/Triton'
  }
];

const publications = [
  {
    title: 'Geometry-Aware Implicit Neural Reconstruction of Oblique Micro-Ultrasound Scans',
    venue: 'In review at MIDL',
    year: '2026'
  },
  {
    title: 'AortaGPT: An Interactive Vision-Language System for Aortic CT Analysis',
    venue: 'In review at CVPR',
    year: '2026'
  }
];
---

<Layout title={`${profile.name} | Portfolio`}>
  <main class="page">
    <nav class="topnav" aria-label="Primary">
      <a href="#about">About</a>
      <a href="#work">Work</a>
      <a href="#education">Education</a>
      <a href="#projects">Projects</a>
      <a href="#papers">Papers</a>
      <a href="#skills">Skills</a>
      <a href="#contact">Contact</a>
      <span class="nav-todo">Resume (TODO)</span>
    </nav>

    <header class="hero">
      <div class="hero-grid">
        <div class="avatar" aria-hidden="true">
          <span>HC</span>
        </div>
        <div class="hero-copy">
          <h1>{profile.name}</h1>
          <p class="hero-sub">
            B.S. Computer Science &amp; Mathematics, University of Florida (2024–2027)
          </p>
          <p class="hero-sub">
            Researcher @ MIRTH AI Lab (2024–Present); OPS Researcher @ University of Florida (2025–Present)
          </p>

          <div class="hero-links">
            <a href={profile.github} target="_blank" rel="noreferrer">GitHub</a>
            <a href={`mailto:${profile.email}`}>Email</a>
            <span>{profile.phone}</span>
            <span class="dot" aria-hidden="true">•</span>
            <span>{profile.location}</span>
          </div>

          <p class="last-updated">Last updated: {lastUpdated}</p>
        </div>
      </div>
      <!-- TODO: Replace avatar placeholder with /public/avatar.jpg. -->
    </header>

    <section id="about" class="section section-bio">
      <SectionTitle title="About" icon="about" />
      <p class="todo">TODO: Add a short bio in your own words (2-3 sentences).</p>
    </section>

    <section id="work" class="section section-employment">
      <SectionTitle title="Work" icon="work" />
      <p class="note">Focus areas: diffusion/flow matching, implicit neural representations (INRs), and clinical report alignment.</p>
      <div class="timeline">
        {employment.map((job) => (
          <article class="entry">
            <div class="entry-head">
              <h3>
                {job.role}, <span class="org">{job.org}</span>
              </h3>
              <p>{job.period}</p>
            </div>
            <p class="entry-meta">{job.location}</p>
            <ul>
              {job.highlights.map((item) => <li>{item}</li>)}
            </ul>
          </article>
        ))}
      </div>
    </section>

    <section id="education" class="section section-education">
      <SectionTitle title="Education" icon="edu" />
      <div class="timeline">
        {education.map((item) => (
          <article class="entry">
            <div class="entry-head">
              <h3>
                {item.degree}, <span class="org">{item.school}</span>
              </h3>
              <p>{item.period}</p>
            </div>
            <p class="entry-meta">GPA {item.gpa}</p>
            <p class="inline-list">Relevant coursework: {item.details.join(' · ')}</p>
          </article>
        ))}
      </div>
    </section>

    <section id="projects" class="section section-projects">
      <SectionTitle title="Projects" icon="projects" />
      <p class="note">
        Full PixArt implementation and a separate JAX stack proof-of-concept are both listed intentionally.
      </p>
      <div class="list">
        {projects.map((project) => (
          <article class="row">
            <h3>
              <a href={project.href} target="_blank" rel="noreferrer">{project.name}</a>
            </h3>
            <p class="entry-meta">{project.stack}</p>
            {project.detail && <p>{project.detail}</p>}
          </article>
        ))}
      </div>
    </section>

    <section id="papers" class="section section-publications">
      <SectionTitle title="Papers" icon="papers" />
      <div class="list">
        {publications.map((paper) => (
          <article class="row">
            <div class="entry-head">
              <h3>{paper.title}</h3>
              <p>{paper.year}</p>
            </div>
            <p class="entry-meta">{paper.venue}</p>
          </article>
        ))}
      </div>
    </section>

    <section id="skills" class="section section-skills">
      <SectionTitle title="Skills" icon="skills" />
      <p class="inline-list">
        Machine learning tools: PyTorch · JAX (Flax/Equinox) · Orbax · Grain · Triton · NVIDIA DALI · DDP/FSDP · Weights & Biases · Git · Linux/Unix · Python · C++
      </p>
      <p class="inline-list">
        Mathematical foundations: information theory · measure-theoretic probability · optimal transport · optimization on manifolds
      </p>
    </section>

    <section id="contact" class="section section-contact">
      <SectionTitle title="Contact" icon="contact" />
      <p class="inline-list">
        Email: <a href={`mailto:${profile.email}`}>{profile.email}</a> · GitHub: <a href={profile.github} target="_blank" rel="noreferrer">hachoj</a>
      </p>
      <p class="note">TODO: Add LinkedIn, Google Scholar, and/or a resume PDF link if desired.</p>
    </section>
  </main>
</Layout>
